{"statusCode": 200, "body": {"github_data": {"projectName": "anthropic-sdk-python", "owner": "anthropics", "stars": 2505, "language": "Python", "topics": [], "description": null, "readme": "# Anthropic Python API library\n\n<!-- prettier-ignore -->\n[![PyPI version](https://img.shields.io/pypi/v/anthropic.svg?label=pypi%20(stable))](https://pypi.org/project/anthropic/)\n\nThe Anthropic Python library provides convenient access to the Anthropic REST API from any Python 3.9+\napplication. It includes type definitions for all request params and response fields,\nand offers both synchronous and asynchronous clients powered by [httpx](https://github.com/encode/httpx).\n\n## Documentation\n\nThe REST API documentation can be found on [docs.anthropic.com](https://docs.anthropic.com/claude/reference/). The full API of this library can be found in [api.md](api.md).\n\n## Installation\n\n```sh\n# install from PyPI\npip install anthropic\n```\n\n## Usage\n\nThe full API of this library can be found in [api.md](api.md).\n\n```python\nimport os\nfrom anthropic import Anthropic\n\nclient = Anthropic(\n    api_key=os.environ.get(\"ANTHROPIC_API_KEY\"),  # This is the default and can be omitted\n)\n\nmessage = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n)\nprint(message.content)\n```\n\nWhile you can provide an `api_key` keyword argument,\nwe recommend using [python-dotenv](https://pypi.org/project/python-dotenv/)\nto add `ANTHROPIC_API_KEY=\"my-anthropic-api-key\"` to your `.env` file\nso that your API Key is not stored in source control.\n\n## Async usage\n\nSimply import `AsyncAnthropic` instead of `Anthropic` and use `await` with each API call:\n\n```python\nimport os\nimport asyncio\nfrom anthropic import AsyncAnthropic\n\nclient = AsyncAnthropic(\n    api_key=os.environ.get(\"ANTHROPIC_API_KEY\"),  # This is the default and can be omitted\n)\n\n\nasync def main() -> None:\n    message = await client.messages.create(\n        max_tokens=1024,\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": \"Hello, Claude\",\n            }\n        ],\n        model=\"claude-sonnet-4-5-20250929\",\n    )\n    print(message.content)\n\n\nasyncio.run(main())\n```\n\nFunctionality between the synchronous and asynchronous clients is otherwise identical.\n\n### With aiohttp\n\nBy default, the async client uses `httpx` for HTTP requests. However, for improved concurrency performance you may also use `aiohttp` as the HTTP backend.\n\nYou can enable this by installing `aiohttp`:\n\n```sh\n# install from PyPI\npip install anthropic[aiohttp]\n```\n\nThen you can enable it by instantiating the client with `http_client=DefaultAioHttpClient()`:\n\n```python\nimport asyncio\nfrom anthropic import DefaultAioHttpClient\nfrom anthropic import AsyncAnthropic\n\n\nasync def main() -> None:\n    async with AsyncAnthropic(\n        api_key=\"my-anthropic-api-key\",\n        http_client=DefaultAioHttpClient(),\n    ) as client:\n        message = await client.messages.create(\n            max_tokens=1024,\n            messages=[\n                {\n                    \"role\": \"user\",\n                    \"content\": \"Hello, Claude\",\n                }\n            ],\n            model=\"claude-sonnet-4-5-20250929\",\n        )\n        print(message.content)\n\n\nasyncio.run(main())\n```\n\n## Streaming responses\n\nWe provide support for streaming responses using Server Side Events (SSE).\n\n```python\nfrom anthropic import Anthropic\n\nclient = Anthropic()\n\nstream = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n    stream=True,\n)\nfor event in stream:\n    print(event.type)\n```\n\nThe async client uses the exact same interface.\n\n```python\nfrom anthropic import AsyncAnthropic\n\nclient = AsyncAnthropic()\n\nstream = await client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n    stream=True,\n)\nasync for event in stream:\n    print(event.type)\n```\n\n### Tool helpers\n\nThis library provides helper functions for defining and running tools as pure python functions, for example:\n\n```py\nimport json\nimport rich\nfrom typing_extensions import Literal\nfrom anthropic import Anthropic, beta_tool\n\nclient = Anthropic()\n\n\n@beta_tool\ndef get_weather(location: str) -> str:\n    \"\"\"Lookup the weather for a given city in either celsius or fahrenheit\n\n    Args:\n        location: The city and state, e.g. San Francisco, CA\n    Returns:\n        A dictionary containing the location, temperature, and weather condition.\n    \"\"\"\n    # Here you would typically make an API call to a weather service\n    # For demonstration, we return a mock response\n    return json.dumps(\n        {\n            \"location\": location,\n            \"temperature\": \"68\u00b0F\",\n            \"condition\": \"Sunny\",\n        }\n    )\n\n\nrunner = client.beta.messages.tool_runner(\n    max_tokens=1024,\n    model=\"claude-sonnet-4-5-20250929\",\n    tools=[get_weather],\n    messages=[\n        {\"role\": \"user\", \"content\": \"What is the weather in SF?\"},\n    ],\n)\nfor message in runner:\n    rich.print(message)\n```\n\nOn every iteration, an API request will be made, if Claude wants to call one of the given tools then it will be automatically called, and the result will be returned directly to the model in the next iteration.\n\nFor more information see the [full docs](tools.md).\n\n### Streaming Helpers\n\nThis library provides several conveniences for streaming messages, for example:\n\n```py\nimport asyncio\nfrom anthropic import AsyncAnthropic\n\nclient = AsyncAnthropic()\n\nasync def main() -> None:\n    async with client.messages.stream(\n        max_tokens=1024,\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": \"Say hello there!\",\n            }\n        ],\n        model=\"claude-sonnet-4-5-20250929\",\n    ) as stream:\n        async for text in stream.text_stream:\n            print(text, end=\"\", flush=True)\n        print()\n\n    message = await stream.get_final_message()\n    print(message.to_json())\n\nasyncio.run(main())\n```\n\nStreaming with `client.messages.stream(...)` exposes [various helpers for your convenience](helpers.md) including accumulation & SDK-specific events.\n\nAlternatively, you can use `client.messages.create(..., stream=True)` which only returns an async iterable of the events in the stream and thus uses less memory (it does not build up a final message object for you).\n\n## Token counting\n\nTo get the token count for a message without creating it you can use the `client.messages.count_tokens()` method. This takes the same `messages` list as the `.create()` method.\n\n```py\ncount = client.messages.count_tokens(\n    model=\"claude-sonnet-4-5-20250929\",\n    messages=[\n        {\"role\": \"user\", \"content\": \"Hello, world\"}\n    ]\n)\ncount.input_tokens  # 10\n```\n\nYou can also see the exact usage for a given request through the `usage` response property, e.g.\n\n```py\nmessage = client.messages.create(...)\nmessage.usage\n# Usage(input_tokens=25, output_tokens=13)\n```\n\n## Message Batches\n\nThis SDK provides support for the [Message Batches API](https://docs.anthropic.com/en/docs/build-with-claude/message-batches) under the `client.messages.batches` namespace.\n\n### Creating a batch\n\nMessage Batches take the exact same request params as the standard Messages API:\n\n```python\nawait client.messages.batches.create(\n    requests=[\n        {\n            \"custom_id\": \"my-first-request\",\n            \"params\": {\n                \"model\": \"claude-sonnet-4-5-20250929\",\n                \"max_tokens\": 1024,\n                \"messages\": [{\"role\": \"user\", \"content\": \"Hello, world\"}],\n            },\n        },\n        {\n            \"custom_id\": \"my-second-request\",\n            \"params\": {\n                \"model\": \"claude-sonnet-4-5-20250929\",\n                \"max_tokens\": 1024,\n                \"messages\": [{\"role\": \"user\", \"content\": \"Hi again, friend\"}],\n            },\n        },\n    ]\n)\n```\n\n### Getting results from a batch\n\nOnce a Message Batch has been processed, indicated by `.processing_status === 'ended'`, you can access the results with `.batches.results()`\n\n```python\nresult_stream = await client.messages.batches.results(batch_id)\nasync for entry in result_stream:\n    if entry.result.type == \"succeeded\":\n        print(entry.result.message.content)\n```\n\n## Tool use\n\nThis SDK provides support for tool use, aka function calling. More details can be found in [the documentation](https://docs.anthropic.com/claude/docs/tool-use).\n\n## AWS Bedrock\n\nThis library also provides support for the [Anthropic Bedrock API](https://aws.amazon.com/bedrock/claude/) if you install this library with the `bedrock` extra, e.g. `pip install -U anthropic[bedrock]`.\n\nYou can then import and instantiate a separate `AnthropicBedrock` class, the rest of the API is the same.\n\n```py\nfrom anthropic import AnthropicBedrock\n\nclient = AnthropicBedrock()\n\nmessage = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello!\",\n        }\n    ],\n    model=\"anthropic.claude-sonnet-4-5-20250929-v1:0\",\n)\nprint(message)\n```\n\nThe bedrock client supports the following arguments for authentication\n\n```py\nAnthropicBedrock(\n  aws_profile='...',\n  aws_region='us-east'\n  aws_secret_key='...',\n  aws_access_key='...',\n  aws_session_token='...',\n)\n```\n\nFor a more fully fledged example see [`examples/bedrock.py`](https://github.com/anthropics/anthropic-sdk-python/blob/main/examples/bedrock.py).\n\n## Google Vertex\n\nThis library also provides support for the [Anthropic Vertex API](https://cloud.google.com/vertex-ai?hl=en) if you install this library with the `vertex` extra, e.g. `pip install -U anthropic[vertex]`.\n\nYou can then import and instantiate a separate `AnthropicVertex`/`AsyncAnthropicVertex` class, which has the same API as the base `Anthropic`/`AsyncAnthropic` class.\n\n```py\nfrom anthropic import AnthropicVertex\n\nclient = AnthropicVertex()\n\nmessage = client.messages.create(\n    model=\"claude-sonnet-4@20250514\",\n    max_tokens=100,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello!\",\n        }\n    ],\n)\nprint(message)\n```\n\nFor a more complete example see [`examples/vertex.py`](https://github.com/anthropics/anthropic-sdk-python/blob/main/examples/vertex.py).\n\n## Using types\n\nNested request parameters are [TypedDicts](https://docs.python.org/3/library/typing.html#typing.TypedDict). Responses are [Pydantic models](https://docs.pydantic.dev) which also provide helper methods for things like:\n\n- Serializing back into JSON, `model.to_json()`\n- Converting to a dictionary, `model.to_dict()`\n\nTyped requests and responses provide autocomplete and documentation within your editor. If you would like to see type errors in VS Code to help catch bugs earlier, set `python.analysis.typeCheckingMode` to `basic`.\n\n## Pagination\n\nList methods in the Anthropic API are paginated.\n\nThis library provides auto-paginating iterators with each list response, so you do not have to request successive pages manually:\n\n```python\nfrom anthropic import Anthropic\n\nclient = Anthropic()\n\nall_batches = []\n# Automatically fetches more pages as needed.\nfor batch in client.messages.batches.list(\n    limit=20,\n):\n    # Do something with batch here\n    all_batches.append(batch)\nprint(all_batches)\n```\n\nOr, asynchronously:\n\n```python\nimport asyncio\nfrom anthropic import AsyncAnthropic\n\nclient = AsyncAnthropic()\n\n\nasync def main() -> None:\n    all_batches = []\n    # Iterate through items across all pages, issuing requests as needed.\n    async for batch in client.messages.batches.list(\n        limit=20,\n    ):\n        all_batches.append(batch)\n    print(all_batches)\n\n\nasyncio.run(main())\n```\n\nAlternatively, you can use the `.has_next_page()`, `.next_page_info()`, or `.get_next_page()` methods for more granular control working with pages:\n\n```python\nfirst_page = await client.messages.batches.list(\n    limit=20,\n)\nif first_page.has_next_page():\n    print(f\"will fetch next page using these details: {first_page.next_page_info()}\")\n    next_page = await first_page.get_next_page()\n    print(f\"number of items we just fetched: {len(next_page.data)}\")\n\n# Remove `await` for non-async usage.\n```\n\nOr just work directly with the returned data:\n\n```python\nfirst_page = await client.messages.batches.list(\n    limit=20,\n)\n\nprint(f\"next page cursor: {first_page.last_id}\")  # => \"next page cursor: ...\"\nfor batch in first_page.data:\n    print(batch.id)\n\n# Remove `await` for non-async usage.\n```\n\n## Nested params\n\nNested parameters are dictionaries, typed using `TypedDict`, for example:\n\n```python\nfrom anthropic import Anthropic\n\nclient = Anthropic()\n\nmessage = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"content\": \"Hello, world\",\n            \"role\": \"user\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n    metadata={},\n)\nprint(message.metadata)\n```\n\n## File uploads\n\nRequest parameters that correspond to file uploads can be passed as `bytes`, or a [`PathLike`](https://docs.python.org/3/library/os.html#os.PathLike) instance or a tuple of `(filename, contents, media type)`.\n\n```python\nfrom pathlib import Path\nfrom anthropic import Anthropic\n\nclient = Anthropic()\n\nclient.beta.files.upload(\n    file=Path(\"/path/to/file\"),\n)\n```\n\nThe async client uses the exact same interface. If you pass a [`PathLike`](https://docs.python.org/3/library/os.html#os.PathLike) instance, the file contents will be read asynchronously automatically.\n\n## Handling errors\n\nWhen the library is unable to connect to the API (for example, due to network connection problems or a timeout), a subclass of `anthropic.APIConnectionError` is raised.\n\nWhen the API returns a non-success status code (that is, 4xx or 5xx\nresponse), a subclass of `anthropic.APIStatusError` is raised, containing `status_code` and `response` properties.\n\nAll errors inherit from `anthropic.APIError`.\n\n```python\nimport anthropic\nfrom anthropic import Anthropic\n\nclient = Anthropic()\n\ntry:\n    client.messages.create(\n        max_tokens=1024,\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": \"Hello, Claude\",\n            }\n        ],\n        model=\"claude-sonnet-4-5-20250929\",\n    )\nexcept anthropic.APIConnectionError as e:\n    print(\"The server could not be reached\")\n    print(e.__cause__)  # an underlying Exception, likely raised within httpx.\nexcept anthropic.RateLimitError as e:\n    print(\"A 429 status code was received; we should back off a bit.\")\nexcept anthropic.APIStatusError as e:\n    print(\"Another non-200-range status code was received\")\n    print(e.status_code)\n    print(e.response)\n```\n\nError codes are as follows:\n\n| Status Code | Error Type                 |\n| ----------- | -------------------------- |\n| 400         | `BadRequestError`          |\n| 401         | `AuthenticationError`      |\n| 403         | `PermissionDeniedError`    |\n| 404         | `NotFoundError`            |\n| 422         | `UnprocessableEntityError` |\n| 429         | `RateLimitError`           |\n| >=500       | `InternalServerError`      |\n| N/A         | `APIConnectionError`       |\n\n## Request IDs\n\n> For more information on debugging requests, see [these docs](https://docs.anthropic.com/en/api/errors#request-id)\n\nAll object responses in the SDK provide a `_request_id` property which is added from the `request-id` response header so that you can quickly log failing requests and report them back to Anthropic.\n\n```python\nmessage = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n)\nprint(message._request_id)  # req_018EeWyXxfu5pfWkrYcMdjWG\n```\n\nNote that unlike other properties that use an `_` prefix, the `_request_id` property\n_is_ public. Unless documented otherwise, _all_ other `_` prefix properties,\nmethods and modules are _private_.\n\n### Retries\n\nCertain errors are automatically retried 2 times by default, with a short exponential backoff.\nConnection errors (for example, due to a network connectivity problem), 408 Request Timeout, 409 Conflict,\n429 Rate Limit, and >=500 Internal errors are all retried by default.\n\nYou can use the `max_retries` option to configure or disable retry settings:\n\n```python\nfrom anthropic import Anthropic\n\n# Configure the default for all requests:\nclient = Anthropic(\n    # default is 2\n    max_retries=0,\n)\n\n# Or, configure per-request:\nclient.with_options(max_retries=5).messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n)\n```\n\n### Timeouts\n\nBy default requests time out after 10 minutes. You can configure this with a `timeout` option,\nwhich accepts a float or an [`httpx.Timeout`](https://www.python-httpx.org/advanced/timeouts/#fine-tuning-the-configuration) object:\n\n```python\nfrom anthropic import Anthropic\n\n# Configure the default for all requests:\nclient = Anthropic(\n    # 20 seconds (default is 10 minutes)\n    timeout=20.0,\n)\n\n# More granular control:\nclient = Anthropic(\n    timeout=httpx.Timeout(60.0, read=5.0, write=10.0, connect=2.0),\n)\n\n# Override per-request:\nclient.with_options(timeout=5.0).messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n)\n```\n\nOn timeout, an `APITimeoutError` is thrown.\n\nNote that requests that time out are [retried twice by default](#retries).\n\n### Long Requests\n\n> [!IMPORTANT]\n> We highly encourage you use the streaming [Messages API](#streaming-responses) for longer running requests.\n\nWe do not recommend setting a large `max_tokens` values without using streaming.\nSome networks may drop idle connections after a certain period of time, which\ncan cause the request to fail or [timeout](#timeouts) without receiving a response from Anthropic.\n\nThis SDK will also throw a `ValueError` if a non-streaming request is expected to be above roughly 10 minutes long.\nPassing `stream=True` or [overriding](#timeouts) the `timeout` option at the client or request level disables this error.\n\nAn expected request latency longer than the [timeout](#timeouts) for a non-streaming request\nwill result in the client terminating the connection and retrying without receiving a response.\n\nWe set a [TCP socket keep-alive](https://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html) option in order\nto reduce the impact of idle connection timeouts on some networks.\nThis can be [overriden](#Configuring-the-HTTP-client) by passing a `http_client` option to the client.\n\n## Default Headers\n\nWe automatically send the `anthropic-version` header set to `2023-06-01`.\n\nIf you need to, you can override it by setting default headers per-request or on the client object.\n\nBe aware that doing so may result in incorrect types and other unexpected or undefined behavior in the SDK.\n\n```python\nfrom anthropic import Anthropic\n\nclient = Anthropic(\n    default_headers={\"anthropic-version\": \"My-Custom-Value\"},\n)\n```\n\n## Advanced\n\n### Logging\n\nWe use the standard library [`logging`](https://docs.python.org/3/library/logging.html) module.\n\nYou can enable logging by setting the environment variable `ANTHROPIC_LOG` to `info`.\n\n```shell\n$ export ANTHROPIC_LOG=info\n```\n\nOr to `debug` for more verbose logging.\n\n### How to tell whether `None` means `null` or missing\n\nIn an API response, a field may be explicitly `null`, or missing entirely; in either case, its value is `None` in this library. You can differentiate the two cases with `.model_fields_set`:\n\n```py\nif response.my_field is None:\n  if 'my_field' not in response.model_fields_set:\n    print('Got json like {}, without a \"my_field\" key present at all.')\n  else:\n    print('Got json like {\"my_field\": null}.')\n```\n\n### Accessing raw response data (e.g. headers)\n\nThe \"raw\" Response object can be accessed by prefixing `.with_raw_response.` to any HTTP method call, e.g.,\n\n```py\nfrom anthropic import Anthropic\n\nclient = Anthropic()\nresponse = client.messages.with_raw_response.create(\n    max_tokens=1024,\n    messages=[{\n        \"role\": \"user\",\n        \"content\": \"Hello, Claude\",\n    }],\n    model=\"claude-sonnet-4-5-20250929\",\n)\nprint(response.headers.get('X-My-Header'))\n\nmessage = response.parse()  # get the object that `messages.create()` would have returned\nprint(message.content)\n```\n\nThese methods return a [`LegacyAPIResponse`](https://github.com/anthropics/anthropic-sdk-python/tree/main/src/anthropic/_legacy_response.py) object. This is a legacy class as we're changing it slightly in the next major version.\n\nFor the sync client this will mostly be the same with the exception\nof `content` & `text` will be methods instead of properties. In the\nasync client, all methods will be async.\n\nA migration script will be provided & the migration in general should\nbe smooth.\n\n#### `.with_streaming_response`\n\nThe above interface eagerly reads the full response body when you make the request, which may not always be what you want.\n\nTo stream the response body, use `.with_streaming_response` instead, which requires a context manager and only reads the response body once you call `.read()`, `.text()`, `.json()`, `.iter_bytes()`, `.iter_text()`, `.iter_lines()` or `.parse()`. In the async client, these are async methods.\n\nAs such, `.with_streaming_response` methods return a different [`APIResponse`](https://github.com/anthropics/anthropic-sdk-python/tree/main/src/anthropic/_response.py) object, and the async client returns an [`AsyncAPIResponse`](https://github.com/anthropics/anthropic-sdk-python/tree/main/src/anthropic/_response.py) object.\n\n```python\nwith client.messages.with_streaming_response.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"Hello, Claude\",\n        }\n    ],\n    model=\"claude-sonnet-4-5-20250929\",\n) as response:\n    print(response.headers.get(\"X-My-Header\"))\n\n    for line in response.iter_lines():\n        print(line)\n```\n\nThe context manager is required so that the response will reliably be closed.\n\n### Making custom/undocumented requests\n\nThis library is typed for convenient access to the documented API.\n\nIf you need to access undocumented endpoints, params, or response properties, the library can still be used.\n\n#### Undocumented endpoints\n\nTo make requests to undocumented endpoints, you can make requests using `client.get`, `client.post`, and other\nhttp verbs. Options on the client will be respected (such as retries) when making this request.\n\n```py\nimport httpx\n\nresponse = client.post(\n    \"/foo\",\n    cast_to=httpx.Response,\n    body={\"my_param\": True},\n)\n\nprint(response.headers.get(\"x-foo\"))\n```\n\n#### Undocumented request params\n\nIf you want to explicitly send an extra param, you can do so with the `extra_query`, `extra_body`, and `extra_headers` request\noptions.\n\n> [!WARNING]\n>\n> The `extra_` parameters of the same name overrides the documented parameters. For security reasons, ensure these methods are only used with trusted input data.\n\n#### Undocumented response properties\n\nTo access undocumented response properties, you can access the extra fields like `response.unknown_prop`. You\ncan also get all the extra fields on the Pydantic model as a dict with\n[`response.model_extra`](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel.model_extra).\n\n### Configuring the HTTP client\n\nYou can directly override the [httpx client](https://www.python-httpx.org/api/#client) to customize it for your use case, including:\n\n- Support for [proxies](https://www.python-httpx.org/advanced/proxies/)\n- Custom [transports](https://www.python-httpx.org/advanced/transports/)\n- Additional [advanced](https://www.python-httpx.org/advanced/clients/) functionality\n\n```python\nimport httpx\nfrom anthropic import Anthropic, DefaultHttpxClient\n\nclient = Anthropic(\n    # Or use the `ANTHROPIC_BASE_URL` env var\n    base_url=\"http://my.test.server.example.com:8083\",\n    http_client=DefaultHttpxClient(\n        proxy=\"http://my.test.proxy.example.com\",\n        transport=httpx.HTTPTransport(local_address=\"0.0.0.0\"),\n    ),\n)\n```\n\nYou can also customize the client on a per-request basis by using `with_options()`:\n\n```python\nclient.with_options(http_client=DefaultHttpxClient(...))\n```\n\n### Managing HTTP resources\n\nBy default the library closes underlying HTTP connections whenever the client is [garbage collected](https://docs.python.org/3/reference/datamodel.html#object.__del__). You can manually close the client using the `.close()` method if desired, or with a context manager that closes when exiting.\n\n```py\nfrom anthropic import Anthropic\n\nwith Anthropic() as client:\n  # make requests here\n  ...\n\n# HTTP client is now closed\n```\n\n## Versioning\n\nThis package generally follows [SemVer](https://semver.org/spec/v2.0.0.html) conventions, though certain backwards-incompatible changes may be released as minor versions:\n\n1. Changes that only affect static types, without breaking runtime behavior.\n2. Changes to library internals which are technically public but not intended or documented for external use. _(Please open a GitHub issue to let us know if you are relying on such internals.)_\n3. Changes that we do not expect to impact the vast majority of users in practice.\n\nWe take backwards-compatibility seriously and work hard to ensure you can rely on a smooth upgrade experience.\n\nWe are keen for your feedback; please open an [issue](https://www.github.com/anthropics/anthropic-sdk-python/issues) with questions, bugs, or suggestions.\n\n### Determining the installed version\n\nIf you've upgraded to the latest version but aren't seeing any new features you were expecting then your python environment is likely still using an older version.\n\nYou can determine the version that is being used at runtime with:\n\n```py\nimport anthropic\nprint(anthropic.__version__)\n```\n\n## Requirements\n\nPython 3.9 or higher.\n\n## Contributing\n\nSee [the contributing documentation](./CONTRIBUTING.md).\n", "commit_sha": "2eb9415"}, "parsed_readme": {"title": "Anthropic Python API library", "features": [], "installation": "```sh\n# install from PyPI\npip install anthropic\n```", "usage": "The full API of this library can be found in [api.md](api.md).\n\n```python\nimport os\nfrom anthropic import Anthropic\n\nclient = Anthropic(\n    api_key=os.environ.get(\"ANTHROPIC_API_KEY\"),  # This is the default and can be omitted\n)\n\nmessage = client.messages.create(\n    max_tokens=1024,\n    messages=[\n        {\n            \"role\": \"user\",", "hasDocumentation": true}, "project_analysis": {"projectType": "library", "complexity": "high", "techStack": ["Python"], "keyFeatures": [], "suggestedSegments": 7}}}